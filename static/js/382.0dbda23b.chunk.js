"use strict";(self.webpackChunkcodelearn=self.webpackChunkcodelearn||[]).push([[382],{7382:(e,s,n)=>{n.r(s),n.d(s,{default:()=>Y});var t=n(2555),r=n(1675),i=n(7047),a=n(5043),c=n(4892),l=n(1487),o=n(1907),d=n(7645),u=n(8604),x=n(8635),h=n(2532),m=n(4694),j=n(3750),p=n(1117),f=n(3700),v=n(7785),k=n(3771),g=n(579);function N(){var e,s,n,r,i;const{userInfo:o,isError:d,isPending:x,userToken:N}=(0,a.useContext)(u.cy),{data:y,isLoading:b,isError:A}=(0,h.I)({queryKey:f.lH.tickets.all,queryFn:()=>(0,j.A)({headers:{Authorization:"Bearer ".concat(N)}})}),{data:w,isLoading:C,isError:E}=(0,h.I)({queryKey:f.lH.userOrders.all,queryFn:()=>(0,p.A)({headers:{Authorization:"Bearer ".concat(N)}})});return(0,g.jsxs)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{children:[(0,g.jsx)("div",{children:(0,g.jsx)(l.m5,{})}),(0,g.jsxs)("div",{className:"space-y-10 mt-10",children:[(0,g.jsx)(l.VH,{mainTitle:"\u062f\u0631\u0648\u0647 \u0647\u0627\u06cc \u0627\u062e\u06cc\u0631",linkText:"\u062a\u0645\u0627\u0645 \u062f\u0648\u0631\u0647 \u0647\u0627\u06cc \u062e\u0631\u06cc\u062f\u0627\u0631\u06cc \u0634\u062f\u0647",link:(0,k.O1)(k.U7.my_courses),disabledLink:!(null!==o&&void 0!==o&&null!==(e=o.courses)&&void 0!==e&&null!==(s=e.filter((e=>e)))&&void 0!==s&&s.length)}),(0,g.jsx)(c.WY,{courses:null===o||void 0===o||null===(n=o.courses)||void 0===n?void 0:n.filter((e=>e)),isError:d,isLoading:x})]}),(0,g.jsxs)("div",{className:"space-y-10 mt-10",children:[(0,g.jsx)(l.VH,{mainTitle:"\u062a\u06cc\u06a9\u062a \u0647\u0627\u06cc \u0627\u062e\u06cc\u0631",linkText:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0647\u0645\u0647",link:(0,k.O1)(k.U7.tickets),disabledLink:!(null!==y&&void 0!==y&&null!==(r=y.filter((e=>e)))&&void 0!==r&&r.length)}),(0,g.jsx)(c.NH,{tickets:y,isError:A,isLoading:b})]}),(0,g.jsxs)("div",{className:"space-y-10 mt-10",children:[(0,g.jsx)(l.VH,{mainTitle:"\u0633\u0641\u0627\u0631\u0634 \u0647\u0627\u06cc \u0634\u0645\u0627",linkText:"\u0645\u0634\u0627\u0647\u062f\u0647 \u0647\u0645\u0647",link:(0,k.O1)(k.U7.odrers),disabledLink:!(null!==w&&void 0!==w&&null!==(i=w.filter((e=>e)))&&void 0!==i&&i.length)}),(0,g.jsx)(c.jK,{orders:w,isError:E,isLoading:C})]})]}),"MainPage")}var y=n(3538),b=n(8700);var A=n(5898),w=n(4646),C=n(3546);function E(){const[e,s]=(0,a.useState)(!0),n=(0,a.useRef)(),{userInfo:r,isPending:i,userToken:o,refetchMe:d,isError:x}=(0,a.useContext)(u.cy),[h,j]=(0,A.hS)((()=>(0,g.jsx)(l.FR,{isOpen:!0,result:"success",message:(0,g.jsxs)("div",{className:"flex items-center _840:items-start gap-x-2",children:["\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u062a\u063a\u06cc\u0631 \u06a9\u0631\u062f",(0,g.jsx)(w.S9,{className:"w-6 h-6"})]}),onClose:j}))),[p,f]=(0,A.hS)((()=>(0,g.jsx)(l.FR,{isOpen:!0,result:"error",message:(0,g.jsxs)("div",{className:"flex items-center gap-x-2",children:["\u062e\u0637\u0627 \u0633\u0631\u0648\u0631",(0,g.jsx)(w.S9,{className:"w-6 h-6"})]}),onClose:f}))),k=(0,a.useMemo)((()=>[{name:b.cj.fullName,type:"text",InputComponent:e=>{const{field:s}=e;return(0,g.jsx)(l.cF,{label:"\u0646\u0627\u0645 \u06a9\u0627\u0645\u0644",inputProps:(0,t.A)({},s),icon:(0,g.jsx)(y.VUG,{className:"dark:text-light/70 text-dark/70 w-6 h-6"})})}},{name:b.cj.userName,type:"text",InputComponent:e=>{const{field:s}=e;return(0,g.jsx)(l.cF,{label:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc",inputProps:(0,t.A)((0,t.A)({},s),{},{placeholder:"\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631\u06cc"}),icon:(0,g.jsx)(y.H_r,{className:"dark:text-light/70 text-dark/70 w-6 h-6"})})}},{name:b.cj.email,type:"text",InputComponent:e=>{const{field:s}=e;return(0,g.jsx)(l.cF,{label:"\u0627\u06cc\u0645\u06cc\u0644",icon:(0,g.jsx)(y.FlW,{className:"dark:text-light/70 text-dark/70 w-6 h-6"}),inputProps:(0,t.A)({},s)})}},{name:b.cj.phone,type:"text",InputComponent:e=>{const{field:s}=e;return(0,g.jsx)(l.cF,{label:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0645\u0627\u0633",inputProps:(0,t.A)({},s),icon:(0,g.jsx)(y.I1w,{className:"dark:text-light/70 text-dark/70 w-6 h-6"})})}},{name:b.cj.password,type:"text",InputComponent:s=>{const{field:n}=s;return(0,g.jsx)(g.Fragment,{children:!e&&(0,g.jsx)(c.Y4,{duration:.3,children:(0,g.jsx)(l.cF,{label:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",inputProps:(0,t.A)({},n),icon:(0,g.jsx)(y.JPZ,{className:"dark:text-light/70 text-dark/70 w-6 h-6"})})})})}}]),[e]);return(0,a.createElement)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{key:"UserDetails",className:"font-dana-md h-full"}),(0,g.jsxs)("div",{className:"mb-10 flex items-center justify-between flex-wrap",children:[(0,g.jsx)(l.Er,{children:"\u062c\u0632\u0639\u06cc\u0627\u062a \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc"}),(0,g.jsxs)(C.N,{mode:"wait",children:[e&&(0,g.jsx)(c.Y4,{children:(0,g.jsx)(l.$n,{onClick:()=>s(!1),className:"accent-outline text-xs",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634"})},"edit"),!e&&(0,g.jsx)(c.Y4,{children:(0,g.jsx)(l.$n,{onClick:()=>s(!0),className:"accent-outline text-xs",children:"\u0644\u063a\u0648"})},"cancelEdit")]})]}),(0,g.jsxs)(c.qT,{isError:{error:(0,g.jsx)("div",{className:"abs-center",children:(0,g.jsx)(l.yV,{})}),check:x},isLoading:{loading:(0,g.jsx)("div",{className:"abs-center",children:(0,g.jsx)(l.gG,{text:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc"})}),check:i},children:[(0,g.jsx)(c.lV,{ref:n,submitButton:!1,formTagClassName:"grid md:grid-cols-2 gap-4 _840:gap-6",defaultValues:{[b.cj.fullName]:null===r||void 0===r?void 0:r.name,[b.cj.userName]:null===r||void 0===r?void 0:r.username,[b.cj.email]:null===r||void 0===r?void 0:r.email,[b.cj.phone]:null===r||void 0===r?void 0:r.phone},disabled:e,onSubmit:async e=>{try{await async function(e){let{body:s,headers:n}=e;const r=await fetch("https://codelearn-backend-production.up.railway.app/v1/users",{method:"PUT",headers:(0,t.A)({"Content-Type":"application/json"},n),body:JSON.stringify(s)}),i=await r.json();if(!r.ok)throw i;return i}({body:e,headers:{Authorization:"Bearer ".concat(o)}});h(),s(!0),d()}catch(n){p(),console.log(n)}},schema:b.af,inputs:k}),(0,g.jsx)(C.N,{children:!e&&(0,g.jsx)(c.Y4,{duration:.3,children:(0,g.jsx)(l.$n,{className:"accent-outline text-sm mt-10",onClick:()=>{var e;return[null===(e=n.current)||void 0===e?void 0:e.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))]},children:"\u062b\u0628\u062a \u062a\u0642\u06cc\u0631\u0627\u062a"})},"register")})]}))}function P(){const{isPending:e,isError:s}=(0,a.useContext)(u.cy);return(0,a.createElement)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{key:"SendTicket",className:"h-full"}),(0,g.jsx)(c.fN,{}))}function T(){return(0,g.jsx)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{children:(0,g.jsx)(c.OH,{})}),"AnswerTicket")}function U(){return(0,g.jsx)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{className:"h-full",children:(0,g.jsx)(c.$u,{})}),"Tickets")}function I(){var e;const{isError:s,isPending:n,userInfo:i}=(0,a.useContext)(u.cy),o=(0,r.Zp)();return(0,g.jsxs)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{className:"h-full",children:[(0,g.jsxs)("section",{className:"flex items-center gap-x-2 justify-between mb-5",children:[(0,g.jsx)(l.Er,{children:"\u062f\u0648\u0631\u0647 \u0647\u0627\u06cc \u0645\u0646"}),(0,g.jsx)(l.$n,{onClick:()=>o(-1),className:"accent-outline rounded-full",children:(0,g.jsx)(y.iE1,{})})]}),(0,g.jsx)(x.s,{children:(0,g.jsx)(c.qT,{isError:{error:(0,g.jsx)("div",{className:"abs-center",children:(0,g.jsx)(l.yV,{text:"\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0627\u0648\u0645\u062f\u0647"})}),check:s},isLoading:{loading:(0,g.jsx)("div",{className:"abs-center",children:(0,g.jsx)(l.gG,{text:"\u062f\u0631\u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u06cc\u0631\u06cc"})}),check:n},dataCheck:{error:(0,g.jsx)("div",{className:"abs-center",children:(0,g.jsx)(l.YQ,{text:"\u062f\u0648\u0631\u0647 \u0627\u06cc \u0646\u062f\u0627\u0631\u06cc\u062f"})}),check:null===i||void 0===i||null===(e=i.courses)||void 0===e?void 0:e.length},children:(0,g.jsx)(c.UQ,{data:(null===i||void 0===i?void 0:i.courses)||[],Component:l.Ez,serachPath:"name"})})})]}))}function L(){return(0,a.createElement)(m.P.div,(0,t.A)((0,t.A)({},(0,v.c)()),{},{key:"AllOrders",className:"h-full"}),(0,g.jsx)(c.T2,{}))}function _(){return(0,g.jsx)("div",{className:"h-full",children:(0,g.jsx)(c.xk,{})})}var F=n(5948);function O(e){const s=s=>{const[n,r]=(0,a.useState)("");return(0,a.useEffect)((()=>{r(function(){const e={timeZone:"Asia/Tehran",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};function s(e){switch(n(e)){case"01":return"\u0641\u0631\u0648\u0631\u062f\u06cc\u0646";case"02":return"\u0627\u0631\u062f\u06cc\u0628\u0647\u0634\u062a";case"03":return"\u062e\u0631\u062f\u0627\u062f";case"04":return"\u062a\u06cc\u0631";case"05":return"\u0645\u0631\u062f\u0627\u062f";case"06":return"\u0634\u0647\u0631\u06cc\u0648\u0631";case"07":return"\u0645\u0647\u0631";case"08":return"\u0622\u0628\u0627\u0646";case"09":return"\u0622\u0630\u0631";case"10":return"\u062f\u06cc";case"11":return"\u0628\u0647\u0645\u0646";case"12":return"\u0627\u0633\u0641\u0646\u062f";default:return""}}function n(e){switch(e){case"\u06f0\u06f0":return"00";case"\u06f0\u06f1":return"01";case"\u06f0\u06f2":return"02";case"\u06f0\u06f3":return"03";case"\u06f0\u06f4":return"04";case"\u06f0\u06f5":return"05";case"\u06f0\u06f6":return"06";case"\u06f0\u06f7":return"07";case"\u06f0\u06f8":return"08";case"\u06f0\u06f9":return"09";case"\u06f1\u06f0":return"10";case"\u06f1\u06f1":return"11";case"\u06f1\u06f2":return"12"}}const t=(new Date).toLocaleString("fa-IR",e);console.log(t);const r=t.split(",")[0].split("/")[2],i=s(t.split(",")[0].split("/")[1]),a=t.split(",")[0].split("/")[0];return"".concat(r," ").concat(i," ").concat(a)}())}),[]),(0,g.jsx)(e,(0,t.A)((0,t.A)({},s),{},{date:n}))};return(0,a.memo)(s)}const S=[{path:k.U7.main,element:(0,g.jsx)(N,{})},{path:k.U7.user_carts,element:(0,g.jsx)(_,{})},{path:k.U7.user_details,element:(0,g.jsx)(E,{})},{path:k.U7.new_ticket,element:(0,g.jsx)(P,{})},{path:k.U7.ticket_status+"/:ticketId",element:(0,g.jsx)(T,{})},{path:k.U7.tickets,element:(0,g.jsx)(x.s,{children:(0,g.jsx)(U,{})})},{path:k.U7.odrers,element:(0,g.jsx)(x.s,{children:(0,g.jsx)(L,{})})},{path:k.U7.my_courses,element:(0,g.jsx)(I,{})}],H=O(c.aN),V=O(c.Q5);function Y(){const e=(0,r.Ye)(S),s=(0,i.A)("(min-width:840px)"),{logout:n}=(0,a.useContext)(u.cy),{isOpenUserSideBar:c,userSideBarHandler:x}=(0,a.useContext)(u.fy),h=(0,a.useMemo)((()=>({onOpenMenu:()=>x(!0)})),[]),m=(0,a.useMemo)((()=>({onClose:()=>x(!1),onDark:()=>(0,o.e)("dark"),onLight:()=>(0,o.e)("light"),onLogout:()=>n({navigatePath:"/"+k.gZ.root})})),[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"w-full _840:flex",children:[s&&(0,g.jsx)("div",{className:" hidden _840:block",children:(0,g.jsx)(H,{data:(0,d.D)()})}),!s&&(0,g.jsx)("div",{className:" block _840:hidden",children:(0,g.jsx)(V,(0,t.A)({data:(0,d.D)(),open:c},m))}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)(l.Gf,{actions:h}),(0,g.jsxs)("div",{className:"relative user-panel-container user-top-container user-bottom-container min-h-[calc(100vh-65.6px)] _840:min-h-[calc(100vh-89.6px)]",children:[e,(0,g.jsx)(r.OA,{})]})]})]}),(0,g.jsx)(F.dT,{})]})}}}]);
//# sourceMappingURL=382.0dbda23b.chunk.js.map